<div class="container mt-4">
  <div class="d-flex justify-content-between align-items-center mb-3">
    <h2>ğŸ“¦ Products List</h2>
    
    <div>

    <button 
      *ngIf="authService.getUserRole() === 'Manager'" 
      routerLink="/products/create" 
      class="btn btn-primary">
      Add New Product â•
    </button>
    
    </div>

  </div>

  <div class="mb-3">
    <input 
      type="text" 
      class="form-control" 
      placeholder="Search by name or category... ğŸ”" 
      [(ngModel)]="searchTerm" 
      (input)="onSearch()">
  </div>

  <div *ngIf="products.length === 0" class="alert alert-warning">
    No products found, or data is loading...
  </div>

<table *ngIf="filteredProducts.length > 0" class="table table-striped table-bordered mt-3">
    <thead class="table-dark">
      <tr>
        <th>Name</th>
        <th>Price</th>
        <th>Quantity</th>
        <th>Min Qty âš ï¸</th> <th>Category</th>
        <th>Description</th>
        <th>Actions</th> 
      </tr>
    </thead>
    <tbody>
      <tr *ngFor="let item of filteredProducts">
        <td>{{ item.name }}</td>
        <td>{{ item.price | currency }}</td>
        
        <td [class.text-danger]="item.quantity <= item.minQuantity" [class.fw-bold]="item.quantity <= item.minQuantity">
          {{ item.quantity }}
        </td>

        <td>{{ item.minQuantity }}</td> 

        <td>{{ item.category }}</td>
        <td>{{ item.description }}</td>
        
        <td>
          <a [routerLink]="['/products/edit', item.id]" class="btn btn-primary btn-sm me-2">
            Edit âœï¸
          </a>

        <button 
          *ngIf="authService.getUserRole() === 'Manager'" 
          (click)="onDelete(item.id)" 
          class="btn btn-danger btn-sm">
          Delete ğŸ—‘ï¸
        </button>
        </td>

      </tr>
    </tbody>
  </table>

  <div *ngIf="products.length > 0 && filteredProducts.length === 0" class="alert alert-info mt-3">
    No results found matching "{{ searchTerm }}" ğŸ¤·â€â™‚ï¸
  </div>

</div>